BRANCH=$(git rev-parse --abbrev-ref HEAD)
REGEX="^(feature|bugfix|hotfix|release|chore)\/([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*)$|^(main|develop|staging)$"

echo
echo "ğŸ” Checking branch name..."
echo "Branch name: $BRANCH"

if ! echo "$BRANCH" | grep -qE "$REGEX"; then
  echo "âŒ Invalid branch name!"
  echo "Please use: feature/*, bugfix/*, hotfix/*, release/*, chore/* or main/develop/staging"
  exit 1
fi

echo
echo "ğŸ§¹ Running lint-staged..."
pnpm lint-staged

echo
echo "ğŸ” Type checking..."
pnpm type-check

echo "ğŸ¤– Building..."
pnpm build

echo "âœ… Pre-commit checks passed!"
echo